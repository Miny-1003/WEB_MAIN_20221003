# HTML 프로젝트 - 깃허브

## 개인 웹페이지 제작 시작(이름 : index.html)
- [프로젝트 메인 주소](https://miny-1003.github.io/Web_home_20221003/)

## 2주차 수업: 메인화면 개발 완료! (문제 포함)

- image 폴더 속 로고 이미지 index.html에 적용 (img src)
- 백그라운드 검정색으로 수정 (body style)
- 텍스트 메뉴 제작 (게임정보, 미디어, 소식, 고객지원 등등) (div)
- 메인 로비 화면 제작 (div, img src)
- 하단 텍스트 추가 완료 (Riot Games Company...) (div, h3)

## 3주차 수업: 부트스트랩 적용 완료! (문제 포함) 

part1.
- 문서 저자정보 설정과 ID지정, 검색엔진 최적화, 상대경로 기준 URL 정의
- 메인 로비 이미지 속에 하이퍼 링크(="https://playvalorant.com/ko-kr/") 삽입 (a href)
- table 제작 (표 제목: 인기 캐릭터) (caption, tr, td, colspan 활용)
- 표 색 지정 (1행: skyblue, 2행: grey, 3행: pink)
- 표 수정 grey열 5행 합성 후 하이퍼 링크 삽입 (응용 문제)
- pink 열 캐릭터 이미지 삽입 (응용 문제)

part2.
- meta viewport 적용(반응형 웹디자인 기초 작업)
- Popper.js(드롭다운에 필요)와 Bootstrap JS를 CDN으로 불러오는 코드 작성
- 부트스트랩 접속 후 nav 코드 긁어서 index.html에 적용
- 기존 텍스트 메뉴 삭제 후 nav 코드 속에 재작성
- 메뉴 드롭다운 일부(고객지원) 적용 (연습 문제)
- nav 색상 검정색으로 변경 (연습 문제)
- 테이블 다양한 색상 적용 (연습 문제)

<문제상황 및 대처>
- 드롭다운 기능이 작동하지 않는 문제 발생 -> popper.js 추가 후 성공

<추가>
- 06.05 드롭다운 메뉴 최신화(링크 추가 및 버튼 개선)

## 4주차 수업: 네비게이션 바 및 테이블 개선 완료! (문제 포함)

part1.
- 로고 이미지 nav 속으로 이동(배경색 삭제)
- <div class="container-fluid"> 적용 (반응형 웹디자인)
- 메인 로비 이미지 속(img 내부 속성) class="img-fluid" 적용
- table 부트스트랩 스타일로 전체 수정 (thead, th 사용) (속성값: class=“table") (반응형 웹디자인 추가)
- 메뉴 드롭다운 일부(고객지원) 하이퍼링크 적용 (응용 문제)
- 부트스트랩 타입 table 색상 적용 (응용 문제)

part2.
- js 폴더 생성 및 basic_text.js 작성 후 <head> 태그에 <script> 태그로 삽입.
    <!-- <script type="text/javascript" src="js/basic_js_test.js"></script> -->
- var, const, let 변수명 사용법 익히기
- 개발자 모드(F12)를 통해 콘솔 출력 후 확인
- nav에 검색창 추가 (부트스트랩 - 컴포넌트)
- 검색 기능 구현
    - search.js 작성(.getElementById, addEventListener, function, alert) 후 <head> 태그에 <script> 태그로 삽입.
    - 검색창 버튼(속이 색칠 되지 않은) 기능 구현 (button class, id, type="submit") (id가 같아야 작동)
    - defer 속성 추가(search.js)
- 클릭이벤트 식별자 변경해보기 (스크립트와 index.html 둘다) (연습 문제)
- 같은 이름의 함수 중첩해보기 (연습 문제)
    - 같은 이름의 함수가 중첩되어도 에러는 나지 않는다. 추가로 마지막에 정의된 함수가 우선순위가 더 높다.
- 함수에 변수를 추가해 변수를 출력하도록 변경 (연습 문제)

## 5주차 수업: 팝업창 및 검색창 구현 완료

- 데이터 타입
    - 원시타입 참조 타입 구분 및 undefi 와 null 값 확인 (data_type.js)
    - 객체(참조타입)와 배열
    - MAP 과 SET
    - 템플릿 리터럴
- index.html에 검색 기능 구현 ( form, button, googleSearch() )
- search.js 속 get방식 코드를 추가해 구현
- 팝업 추가(pop_up.js 및 popup.html 추가) (상대 경로 파악)
- 팝업창에 날짜 및 시간 구현
- pop_up.js 에 호버 함수를 추가해 마우스 이벤트 추가(로고에 마우스 커서 올릴시 이미지 변경)
- 검색 시 공백검사 적용 (문자 길이가 0이면 함수 중단) (연습 문제)
- 검색 시 비속어 검사 (배열 내에 포함되는 문자열이면 함수 중단) (연습 문제)

## 6주차 수업: 팝업창 발전 및 로그인창 구현 완료 (공백 포함 / 로그아웃 포함)

- 화살표 함수 적용해보기
- 팝업창 자동 닫기 기능 구현 ( .getElementById(), setTimeout() ) (10초 카운트다운)
- 로그인폼 구현
    - login/log_in.html 부트스트랩을 이용해 코드 작성
    - 로그인창 css 별도 적용 (log_in.css)
    - form 태그를 이용해 get방식의 전달과 url주소 확인 (로그인 수행)
    - name 속성을 이용해 이메일, 패스워드 데이터 전송
    - log_in.js 구현
        - 폼, 버튼, 이메일, 패스워드 식별
        - 이메일, 패스워드의 공백 제거
        - 공백이면 함수 중단
        - 마지막으로 폼을 submit
- 로그인 창 구현(index.login.html)
    - 로그아웃 버튼 추가 구현
- 로그아웃 버튼 누를 시 이동하는 index_logout.html 구현 (응용 문제)
    - index_logout.html 화면 속 로그아웃 버튼을 누를시 index.html로 연결 (로그아웃)
- 로그인, 로그아웃 창 팝업.js연동 부분 제거 (연습 문제)
- 폴더 및 파일 체크, 들여쓰기 정렬

## 9주차 수업: 로그인폼 입력 제한 조건 추가 및 XSS 방지 코드 추가, 팝업창 쿠키 적용(체크박스 클릭시 닫힘)

part1.
- 로그인폼 입력 길이 제한 및 특수문자 포함 유무 검사 코드 작성(log_in.js 코드 수정)
- XSS 방지 코드 추가 (DOMPurify 라이브러리 활용)
- 로그인 입력길이 제한 추가 (응용 문제)
    - ID: 5글자 이상 10글자 이하, PW: 12글자 이상 15글자 이하
    - 3글자 이상 반복입력 제한 (패턴식)
    - 연속되는 숫자 반복입력 제한 (패턴식)

part2.
- 팝업창 닫기 시간 1000초로 증가
- popup.html 에 쿠키 생성 체크박스 추가
- pop_up.js 에 setCookie와 getCookie 추가
- 체크박스 클릭 시 팝업이 닫히도록 설정
- 크로스 사이트 취약점 보안 설정 추가 ( Secure )

## 10주차 수업: 세션 적용 및 자동로그인 구현 및 로그아웃 세부내용 설정

part1.
- 아이디 체크박스 추가 ("checkbox mb-3", lavel, id="idSaveCheck")
- 체크박스 쿠키 생성 구현
    - 체크 상태 X 일 경우, 쿠키삭제(기존 set, get 이용)
- 아이디 자동 삽입 구현
- 로그인/로그아웃 횟수 쿠키 저장 (로그인/아웃 할때 각각 횟수 쿠키 생성) (응용 문제)
    - 문제발생 : 횟수 셀때 value 값이 NAN으로 나오는 오류 발생
    - 해결 : if (cookie_name[0].trim() === name) {
                return cookie_name[1];
                } 
            : 브라우저가 쿠키를 문자열로 넘길 때 공백이 붙어나올 수 있는 부작용때문에 .trim()을 통해 공백을 제거함으로써 해결되었다.

part2.
- 체크박스 후 로그인하면 로그인 정보 세션이 뜨도록 설정
- 체크박스 체크후 로그인하고 로그아웃했을 시에 다시 로그인 하면 자동로그인이 되도록 설정(세션 유지)
- 로그아웃 시 추가 선택으로 세션 삭제 유무를 고를 수 있도록 하고 체크 후 로그아웃 하면 자동로그인 안되게 환경 구성(응용 문제)
- 로그인 조건에 부합하지 않으면 login_failed()를 통해 3번이상 실패 시 10분동안 로그인 처리가 이루어지지않게 설정(연습 문제)

## 11주차 수업: 세션 암호화/복호화 및 JWT(로그인 후 지속인증)

part1.
- 세션/암호화,복호화
- 패스워드 보안처리 추가(임시 키 사용)
- 복호화 함수 추가
- Web Crypto API 활용하기(응용문제)
- AES-256-GCM 대칭 암호 알고리즘 구현

part2.
- 세션 생성 이후 토큰을 로컬에 저장하고 토큰 유지시간을 1시간으로 설정
- 텍스트 전송에 적합한 Base64로 인코딩
- JSON 문자열 형태로 전환
    - 세션 + 토큰 조합으로 보안을 강화
    - 헤드, 페이로드, 서명으로 구성
- 로컬 스토리지로 토큰을 확인하도록 구성
- 토큰 검증 확인
-  .removeItem 메소드를 통해 로그아웃 시 토큰 삭제 함수 구현(연습 문제)

## 12주차 수업: 모듈화 및 회원가입 기능 구현

part1. 모듈화
- log_in.js 모듈화 진행 그에 따른 부가 코드 수정
    - session.js 수정
    - crypto2.js 수정 : 수정하며 session.js와 crypto2.js, log_in.js가 유기적으로 이루어질수 있도록 재수정을 거침
    - log_out.js 기능 추가(기존 log_in.js에서 추출 후 기능 별도 구현)

- index_login.html 에서 로그인시 사용자 아이디가 보이게 설정 ( ~ 님)

- 오류! : log_in2.js에 필요한 기능만을 조율하는 과정에서 session.check() 가 모든 상황에서 리디액션하는 문제 발생
    - 따라서 session.js 또한 수정이 필요했음

    - 해결 방안 : session.check()에 조건인자를 추가하여 로그인시에는 검사를 하지만 로그인 후 메인 페이지에선 검사하지 않도록 수정

        - 추가 오류: 수정한 session_check() 함수는 "세션이 없으면 index.html로 리디렉션"하게 설계해, 로그인하러 들어가는 log_in.html에서도 그걸 막아버리는 오류가 생김
        - session_check 옵션 설정 
            - log_in.js : { redirectIfLoggedIn: true } (로그인한 사용자는 로그인 페이지 못 들어오게 함)
            - log_in2.js : { redirectIfNotLoggedIn: true } (로그인 안 했으면 메인 화면 접근 못하게 막음)
        
        - 추가 오류 : 이전에 자동 로그인을 위해 (체크박스를 통한)세션을 유지하는 기능을 구현했었는데 이 부분에서 추가 오류가 발생했다.
            - 상세 설명 : 로그아웃 시 체크박스를 해제하면 세션을 남겨둠 (자동 로그인 목적) 이후 사용자가 /log_in.html로 접속 -> session_check()가 자동 실행되며
              "이미 로그인 되었습니다." 로그가 뜸 -> index_login.html로 이동이 되어야 했다. 하지만 JWT 토큰은 이미 삭제된 상태여서 -> 로그인 후 초기화 로직에서 인증 오류 발생
              결국, 인증 실패로 다시 index.html로 튕김 ->세션은 남아있지만, JWT 토큰이 없어서 인증이 실패하는 것 (세션(sessionStorage)과 JWT(localStorage)가 서로 불일치된 상태)
            - 해결방안 : session_check()에서 세션 + JWT 둘 다 있어야 로그인 상태로 간주하도록 수정

- 오류! : log_out.js을 기능 분리하며 setCookie() 함수를 사용하려 했지만 정의되어 있지 않아서 에러가 발생

    - 해결 방안 : setCookie()와 getCookie()를 cookie.js을 새로 만들어 분리하고, log_in.js와 log_out.js 모두에서 import

- 오류! : 로그아웃 화면(index_logout.html)에서 자동로그아웃 해제 부분 체크 안하고 로그아웃 해도 자동로그인이 안되는 문제 발생

    - 해결 방안 : localStorage.removeItem("jwt_token"); 이 코드가 체크박스 체크 여부와 관계없이 계속 작동하고 있었음. 즉, jwt 토큰이 로그아웃 시마다 삭제되었음
                 따라서 이 부분을 삭제하고 조건문을 추가해 체크박스 여부를 한번더 따지도록 코드 작성

part2. 회원가입
- 회원가입 페이지 추가(join.html)
- 식별자 추가 (name, pw, re-pw, email, agree) id 식별자도 따로 추가
    - 기존 로그인폼 입력 emailvalue에서 idvalue로 변경
- SignUp 클래스를 작성(객체 리터럴 방식) (기본 값이 없고, 인자값으로 전달 받아 초기화)
    - 회원가입 정보를 객체로 저장
- 회원가입과 함께 세션객체를 생성하도록 구성 (session2.js)
- 회원가입에 필요한 입력 필터링 구현
    - 문제 상황 발생 : 기존 로그인 폼의 입력 필터링과 회원가입 폼의 입력필터링 구성에 차이가 발생
        - 해결 방안 : 기존 입력 필터링을 각각 삭제하고 추가적인 모듈(validation.js)을 만들어 유효성 검사 시 이곳을 거쳐가도록 동일화 함.
- 회원가입 후 암호화된 객체 저장 구현 (세션에 암호화하여 저장) (연습 문제)
- 로그인 후 복호화된 객체 내용 출력 (암호화 된 회원가입 정보를 복호화, 콘솔에 출력 하도록 구성) (연습 문제)
- 세션에 회원가입 세션이 없다 -> 복호화 x, 출력하지 않음 (연습 문제)
- 로그인 및 회원가입 암호화, 복호화 시 사용자 정보를 개별적으로 저장하도록 수정
    - 오류! : 개별 필드(id, name, email 등)를 각각 암호화하면, 매번 encrypt_text() 호출마다 새로운 AES 키가 생성되고,
              각 항목마다 다른 키로 암호화되지만, 실제 저장되는 키는 마지막 1개뿐(Session_Key)이여서 나머지 항목 복호화 시도 시 OperationError 발생
    - 해결 방안 : 다시 하나의 객체로 통합 암호화

## 13주차 수업 : 개인 프로필 화면 구성 및 지도 API

- 프로필 구성창 내용 수정
    - 기술 스택 선정 및 비중 설정
    - 프로필 사진 수정(응용 문제)
- profile.html을 로그인 후에 들어갈수 있도록 개선
    - 메인 버튼을 누르면 다시 index_login.html로 이동됨
- 세션에 로그인된 정보를 검사한 후, 세션이 있으면 메인 페이지로 이동하도록 구현(응용 문제)
    - 토큰 인증관련 오류 발생
        - a 태그 관련 링크 이동에서 js코드를 통한 이동으로 변경 (id : goProfile)
        - loginForm.submit()을 window.location.href = "index_login.html" 로 변경
        - 이외 토큰 코드 변경및 여러 방식을 시도해봤지만 해결되지 않았음
        - 해결 : 여러 방식을 시도해 보던중 profile.html은 index_login.html과 log_in2.js를 공유하기에
                 안되는 이유를 비교하며 분석한 결과 head에 crypto-js JS 스크립트 유무임을 찾아내어 겨우 해결함.

- 지도 API 구현
- 카카오맵 활성화
- profile.html에 자바 스크립트 연동 완료
- map.js 작성 후 지도 정보를 삽입
- 주소 위치 지정 및 주요 맵 기본 기능 구현완료(기본 스크롤 줌 인, 아웃, 드래그 맵 이동 등)
    - &libraries=services,clusterer,drawing 추가
- 일반 지도 및 / 스카이뷰 전환 기능 구현
- 클릭한 좌표의 위도,경도 출력하도록 설정
- 키워드를 검색하고 목록을 출력하는 기능 구현
- (응용문제) 좌표로 주소 출력하기 기능 구현
- 추천 장소 클릭시 해당 마커로 이동되도록 구현

- 문제 상황
- popup창이 실행되지 않는 문제 지속 발생
- 경로 지정시 popup/popup/popup.html로 지정이 지속적으로 되는걸 확인
- 절대경로 지정 및 추가 검사 함수 구현으로 해결